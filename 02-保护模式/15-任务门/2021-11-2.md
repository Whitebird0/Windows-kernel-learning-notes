任务门是安装在 IDT 表中的

IDT表中只可以安装 3 种门：中断门、陷阱门和任务门。

**任务门描述符**

![](https://raw.githubusercontent.com/Whitebird0/tuchuang/main/2052882-20210302150159522-1100123534.png)

中断描述符格式0000X500`XXXX0000，我们查看IDT表

![](https://raw.githubusercontent.com/Whitebird0/tuchuang/main/QQ%E6%88%AA%E5%9B%BE20211102234523.png)

这两个都是系统的任务门描述符

0058和0050都是段选择子，拆解一下

      0058:
      index:1011
      Ti:0
      RPL:00
      
      0050:
      index:1010
      Ti:0
      RPL:00

索引分别是11和10

![](https://raw.githubusercontent.com/Whitebird0/tuchuang/main/QQ%E6%88%AA%E5%9B%BE20211102234900.png)

实验
---
1.构造门描述符

          00008500`00480000

![](https://raw.githubusercontent.com/Whitebird0/tuchuang/main/QQ%E6%88%AA%E5%9B%BE20211102235051.png)

找到空白处,index为0x20，也就是要触发int 0x20
      
      eq 80b95500 00008500`00480000

当我们触发int 0x20时，段选择子为0x48，拆解一下

           0048:
           index:1001
           Ti:0
           RPL:00

索引为9，是我们自己构造的任务段

![](https://raw.githubusercontent.com/Whitebird0/tuchuang/main/QQ%E6%88%AA%E5%9B%BE20211102235345.png)
      
 我们只要在main中调用int 0x20 就行了
 
 
 

